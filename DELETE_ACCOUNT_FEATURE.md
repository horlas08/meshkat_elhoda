# ููุฒุฉ ุญุฐู ุงูุญุณุงุจ - Delete Account Feature

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ููุฒุฉ ุญุฐู ุงูุญุณุงุจ ุงููุงูู ุฅูู ุงูุชุทุจููุ ููุฐุง ุถุฑูุฑู ููุจูู ุงูุชุทุจูู ุนูู ูุชุฌุฑ Apple iOS.

## ุงููููุงุช ุงููุนุฏูุฉ

### 1. **Auth Layer - ุงููุตุงุฏูุฉ**

#### `lib/features/auth/presentation/bloc/auth_event.dart`
- **ุงูุชุบููุฑ**: ุฅุถุงูุฉ ุญุฏุซ ุฌุฏูุฏ `DeleteAccountRequested`
- **ุงููุตู**: ุญุฏุซ ูุทูุจ ุญุฐู ุญุณุงุจ ุงููุณุชุฎุฏู

```dart
class DeleteAccountRequested extends AuthEvent {
  const DeleteAccountRequested();

  @override
  List<Object?> get props => [];
}
```

#### `lib/features/auth/presentation/bloc/auth_bloc.dart`
- **ุงูุชุบููุฑ**: 
  - ุฅุถุงูุฉ ุงููุนุงูุฌ `on<DeleteAccountRequested>(_onDeleteAccountRequested);`
  - ุฅุถุงูุฉ ุฏุงูุฉ `_onDeleteAccountRequested` ุงูุชู:
    - ุชุณุชุฏุนู `deleteAccount()` ูู ุงููุณุชูุฏุน
    - ุชุตุฏุฑ ุญุงูุฉ `Unauthenticated()` ุนูุฏ ุงููุฌุงุญ
    - ุชุตุฏุฑ ุญุงูุฉ `AuthError` ุนูุฏ ุงููุดู

#### `lib/features/auth/domain/repositories/auth_repository.dart`
- **ุงูุชุบููุฑ**: ุฅุถุงูุฉ ูุงุฌูุฉ `deleteAccount()`
```dart
Future<void> deleteAccount();
```

#### `lib/features/auth/data/repositories/auth_repository_impl.dart`
- **ุงูุชุบููุฑ**: ุชูููุฐ `deleteAccount()` ุงูุฐู ูุณุชุฏุนู ุงูุจูุงูุงุช ุงูุจุนูุฏุฉ
```dart
@override
Future<void> deleteAccount() => _remoteDataSource.deleteAccount();
```

#### `lib/features/auth/data/data_sources/auth_remote_data_source.dart`
- **ุงูุชุบููุฑ**: ุฅุถุงูุฉ ูุงุฌูุฉ `deleteAccount()`
```dart
Future<void> deleteAccount();
```

#### `lib/features/auth/data/data_sources/auth_remote_data_source_impl.dart`
- **ุงูุชุบููุฑ**: ุชูููุฐ `deleteAccount()` ุงูุฐู:
  1. ูุชุญูู ูู ูุฌูุฏ ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู
  2. ูุญุฐู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู Firestore
  3. ูุญุฐู ุญุณุงุจ ุงููุณุชุฎุฏู ูู Firebase Auth
  4. ูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ุงููุฎุชููุฉ ุจูุง ูููุง `requires-recent-login`

### 2. **Firebase Service**

#### `lib/core/network/firebase_service.dart`
- **ุงูุชุบููุฑ**: ุฅุถุงูุฉ ุฏุงูุฉ `deleteDocument()`
```dart
Future<void> deleteDocument(String collection, String docId) async {
  try {
    await _firestore.collection(collection).doc(docId).delete();
  } on FirebaseException catch (e) {
    throw ServerException(
      message: e.message ?? 'ูุดู ุญุฐู ุงููุณุชูุฏ',
      statusCode: 500,
    );
  }
}
```

### 3. **UI Layer - ูุงุฌูุฉ ุงููุณุชุฎุฏู**

#### `lib/features/settings/presentation/widgets/delete_account_section.dart` (ููู ุฌุฏูุฏ)
- **ุงููุตู**: ุฃุฏุงุฉ ูุฎุตุตุฉ ููุณู ุญุฐู ุงูุญุณุงุจ
- **ุงูููุฒุงุช**:
  - ุนุฑุถ ูุณู ูุน ุชูุจููุงุช (ููู ุฃุญูุฑ)
  - ุฒุฑ ุญุฐู ุงูุญุณุงุจ ูุน ุชุฃููุฏ
  - ุญูุงุฑ ุชุฃููุฏ ูุนุฑุถ ุงูุชุญุฐูุฑุงุช:
    - ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ
    - ุฅูุบุงุก ุงูุงุดุชุฑุงู ุงููุดุท
    - ุนุฏู ุฅููุงููุฉ ุงูุชุฑุงุฌุน
    - ุงูุญุงุฌุฉ ูุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
  - ุฏุนู ุงููุถุน ุงููููู ูุงูููุงุฑู
  - ุฑุณุงุฆู ูุฌุงุญ ูุฎุทุฃ ูุงุถุญุฉ

#### `lib/features/settings/presentation/views/setting_view.dart`
- **ุงูุชุบููุฑ**: 
  - ุฅุถุงูุฉ import ููู widget ุงูุฌุฏูุฏ
  - ุฅุถุงูุฉ `DeleteAccountSection()` ูุจู `SettingsGeneral()`

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุจุงููุณุจุฉ ูููุณุชุฎุฏู ุงูููุงุฆู:
1. ุงูุฐูุงุจ ุฅูู ุงูุฅุนุฏุงุฏุงุช
2. ุชูุฑูุฑ ูุณู ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ
3. ุงูุนุซูุฑ ุนูู ูุณู "ุญุฐู ุงูุญุณุงุจ" (ุฃุญูุฑ ุงูููู)
4. ุงูุถุบุท ุนูู ุฒุฑ "ุญุฐู ุงูุญุณุงุจ"
5. ูุฑุงุกุฉ ุงูุชุญุฐูุฑุงุช ูุงูุชุฃููุฏ
6. ุณูุชู ุญุฐู ุงูุญุณุงุจ ูุงูุนูุฏุฉ ููุดุงุดุฉ ุงูุฑุฆูุณูุฉ

### ุจุงููุณุจุฉ ูููุทูุฑ:
```dart
// ุฅุทูุงู ุญุฏุซ ุญุฐู ุงูุญุณุงุจ
context.read<AuthBloc>().add(
  const DeleteAccountRequested(),
);
```

## ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### `requires-recent-login`
- **ุงูุฑุณุงูุฉ**: "ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู ูุจู ุญุฐู ุงูุญุณุงุจ"
- **ุงูุญู**: ุฅุนุงุฏุฉ ุทูุจ ุงููุตุงุฏูุฉ ูู ุงููุณุชุฎุฏู

### ุฃุฎุทุงุก Firebase ุงูุฃุฎุฑู
- ูุชู ุงูุชุนุงูู ูุนูุง ุจุดูู ุนุงู ูู ุฎูุงู `_handleAuthException()`

## ุงูุญุงูุงุช (States)

### `Unauthenticated`
- ููุตุฏุฑ ุนูุฏ ูุฌุงุญ ุญุฐู ุงูุญุณุงุจ
- ูุคุฏู ุฅูู ุชุณุฌูู ุฎุฑูุฌ ุชููุงุฆู

### `AuthError`
- ููุตุฏุฑ ุนูุฏ ูุดู ุญุฐู ุงูุญุณุงุจ
- ูุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูููุณุชุฎุฏู

## ุงููุชุทูุจุงุช ุงูุฃูุงู

โ **ูุชูุงูู ูุน ูุชุทูุจุงุช iOS**
- ูููุฑ ุทุฑููุฉ ุณููุฉ ูุญุฐู ุญุณุงุจ ุงููุณุชุฎุฏู
- ูุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ ูู ุงูุฎุงุฏู
- ูุญุฐู ุญุณุงุจ ุงููุตุงุฏูุฉ ููุงุฆูุงู

โ **ุญูุงูุฉ ุงูุจูุงูุงุช**
- ูุชู ุญุฐู ุงูุจูุงูุงุช ูู Firestore ุฃููุงู
- ุซู ุญุฐู ุญุณุงุจ Firebase Auth
- ูู ุญุงูุฉ ุงููุดูุ ูุชู ุฅุนุงุฏุฉ ูุญุงููุฉ

## ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑูุฉ)

1. **ุฅุถุงูุฉ ุชุญูู ูู ูููุฉ ุงููุฑูุฑ**: ูููู ุฅุถุงูุฉ ุดุงุดุฉ ุชุญูู ูุจู ุญุฐู ุงูุญุณุงุจ
2. **ุชูุฒูู ุงูุจูุงูุงุช**: ุงูุณูุงุญ ูููุณุชุฎุฏู ุจุชูุฒูู ูุณุฎุฉ ูู ุจูุงูุงุชู ูุจู ุงูุญุฐู
3. **ูุชุฑุฉ ุงูุงูุชุธุงุฑ**: ูุชุฑุฉ ุงูุชุธุงุฑ 30 ูููุงู ูุจู ุญุฐู ููุงุฆู ูุนูู

## ููุงุญุธุงุช ูููุฉ

โ๏ธ **ุชุญุฐูุฑ**: ุนูููุฉ ุญุฐู ุงูุญุณุงุจ **ุบูุฑ ูุงุจูุฉ ููุชุฑุงุฌุน**

๐ **ุงูุฃูุงู**: ุงูุชุฃูุฏ ูู ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ ุจุงููุณุชุฎุฏู:
- Firestore documents
- Firebase Authentication
- ุฃู ุจูุงูุงุช ุชุฎุฒูู ูุญููุฉ (ูููู ุฅุถุงูุฉ ูู ุงููุณุชูุจู)
- ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ

## ุงูุงุฎุชุจุงุฑ

```bash
# ุงุฎุชุจุงุฑ ุงูุญุฐู ุงููุงุฌุญ
1. ุชุณุฌูู ุฏุฎูู ุฌุฏูุฏ
2. ุงูุฐูุงุจ ููุฅุนุฏุงุฏุงุช
3. ุงูุถุบุท ุนูู ุญุฐู ุงูุญุณุงุจ
4. ุชุฃููุฏ ุงูุญุฐู
5. ุงูุชุญูู ูู ุญุฐู ุงูุจูุงูุงุช ูู Firestore

# ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
1. ูุตู ุงูุฅูุชุฑูุช ูุงูุถุบุท ุนูู ุญุฐู
2. ุงูุชุญูู ูู ุฑุณุงูุฉ ุงูุฎุทุฃ
```

---

**ุงูุชุงุฑูุฎ**: 10 ููุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ**: 1.0.0
**ุงูุญุงูุฉ**: ููุชูู ูุฌุงูุฒ ููุงุฎุชุจุงุฑ
