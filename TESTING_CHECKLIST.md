# โ ุงุฎุชุจุงุฑ ุงูุญู - ุฎุทุฉ ูุงููุฉ

## **ููุงุท ุงูุงุฎุชุจุงุฑ ุงูุญุฑุฌุฉ:**

---

## **1๏ธโฃ ุงุฎุชุจุงุฑ: ุงูุจูุงูุงุช ุชุจูู ุนูุฏ Pop**

### **ุงููุฏู:**
ุงูุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูุง ุชุฎุชูู ุนูุฏ ุงูุถุบุท ุนูู back button

### **ุงูุฎุทูุงุช:**

```
1. ุงุจุฏุฃ ุงูุชุทุจูู
   โ
2. ุงุฎุชุฑ ุงููุบุฉ (ar/en)
   โ ูุธูุฑ: ูุงุฆูุฉ ุงููุฑุงุก
   โ ุงุณุชุฏุนุงุก ูุงุญุฏ ุฅูู LoadRecitersEvent

3. ุงุจุญุซ ุนู ูุงุฑุฆ (ูุซูุงู: "ุฃุญูุฏ")
   โ ูุธูุฑ: ุงููุชุงุฆุฌ ุงููููุชุฑุฉ
   โ ูุง ุงุณุชุฏุนุงุก ุฌุฏูุฏุ ููุท ุจุญุซ ูุญูู

4. ุงุฎุชุฑ ุฑูุณูุชุฑ (ูุซูุงู: "ุฃุญูุฏ ุงูุนุฌูู")
   โ ููุฏ ุงูุชุทุจูู:
     - context.read<QuranAudioBloc>().add(SelectReciterEvent(...))
     - context.read<QuranAudioBloc>().add(LoadSurahsEvent(...))
   โ ูุธูุฑ: ูุงุฆูุฉ ุงูุณูุฑ
   โ ุงุณุชุฏุนุงุก ูุงุญุฏ ุฅูู LoadSurahsEvent

5. ุงุฎุชุฑ ุณูุฑุฉ (ูุซูุงู: "ุงููุงุชุญุฉ")
   โ ููุฏ ุงูุชุทุจูู:
     - ูููุดุฆ playlist ูู ุฌููุน ุงูุณูุฑ
     - context.read<QuranAudioBloc>().add(LoadPlaylistEvent(...))
   โ ูุธูุฑ: ุดุงุดุฉ ุงููุดุบู
   โ ุงุณุชุฏุนุงุก ูุงุญุฏ ุฅูู LoadPlaylistEvent

6. ุงุถุบุท Play
   โ ูุจุฏุฃ ุงูุชุดุบูู
   โ ุงููุดุบู ูุนูู

7. ุงุถุบุท Back (ูู Player โ Surahs)
   โ ูุฌุจ ุฃู ุชุธูุฑ ูุงุฆูุฉ ุงูุณูุฑ ูุจุงุดุฑุฉ
   โ ุงูุจูุงูุงุช ูุญููุธุฉุ ูุง reload
   โ ูู Log ูุฌุจ ุฃู ุชุฑู: ๐ Popping from AudioSurahsScreen...

8. ุงุถุบุท Back (ูู Surahs โ Reciters)
   โ ูุฌุจ ุฃู ุชุธูุฑ ูุงุฆูุฉ ุงููุฑุงุก ูุจุงุดุฑุฉ
   โ ุงูุจูุงูุงุช ูุญููุธุฉุ ูุง reload

9. ุชุญูู ูู Console:
   - โ ๐ฅ Loading reciters ูุธูุฑ ูุฑุฉ ูุงุญุฏุฉ ููุท
   - โ ๐ฅ Loading surahs ูุธูุฑ ูุฑุฉ ูุงุญุฏุฉ ููุท
   - โ ูุง ุชูุฌุฏ ุงุณุชุฏุนุงุกุงุช ูุชูุฑุฑุฉ
```

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

| ุงูุนูููุฉ | ุงูุชููุน | ุงูุชุญูู |
|--------|--------|--------|
| ุงูุชุญ Reciters | 1 load | โ |
| ุงุจุญุซ | 0 load | โ |
| ุงุฎุชุฑ Reciter | 1 load Surahs | โ |
| ุงุฎุชุฑ Surah | 1 load Playlist | โ |
| Play | ูุนูู | โ |
| Pop ูู Player | Surahs ููุฌูุฏุฉ | โ |
| Pop ูู Surahs | Reciters ููุฌูุฏุฉ | โ |

---

## **2๏ธโฃ ุงุฎุชุจุงุฑ: ูุง Reload ุนูุฏ Search**

### **ุงููุฏู:**
ุงูุชุฃูุฏ ูู ุนุฏู ุญุฏูุซ reload ูุงูู ุนูุฏ ุงูุจุญุซ

### **ุงูุฎุทูุงุช:**

```
1. ุงูุชุญ ุดุงุดุฉ ุงููุฑุงุก
   โ ูุธูุฑ: 50 ูุงุฑุฆ (ูุซูุงู)
   โ ูุญููู ูู API ูุฑุฉ ูุงุญุฏุฉ

2. ุงุจุฏุฃ ูุชุงุจุฉ ูู ุฎุงูุฉ ุงูุจุญุซ
   โ ูุซูุงู: "ุฃ"
   โ ูุฌุจ ุฃู ุชุฑู: ุงููุชุงุฆุฌ ุชุชุญุฏุซ ููุฑุงู
   โ ุจุญุซ ูุญููุ ูุง API call

3. ุฃููู ุงููุชุงุจุฉ:
   โ "ุฃุญ"
   โ "ุฃุญู"
   โ "ุฃุญูุฏ"
   โ ูุฌุจ ุฃู ุชุฑู: ุงููุชุงุฆุฌ ุชุชุญุฏุซ ุจุฏูู ุชุฃุฎูุฑ
   โ ูู ูุฏุฎู ูุนุฏูู ุงููุชุงุฆุฌ ูุญููุงู

4. ุงูุณุญ ุงูุจุญุซ:
   โ ูุฑุฌุน: ุฌููุน ุงููุฑุงุก
   โ ุงูุจูุงูุงุช ุงูุฃุตููุฉ ููุฌูุฏุฉ

5. ุชุญูู ูู Console:
   - โ ๐ฅ Loading reciters ูุธูุฑ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุจุฏุงูุฉ
   - โ ูุง ุชูุฌุฏ ุงุณุชุฏุนุงุกุงุช API ุฃุฎุฑู ุฃุซูุงุก ุงูุจุญุซ
```

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

```
Timeline:
1. ุงูุชุญ โ ๐ฅ Loading reciters (API call 1)
2. ุงุจุญุซ "ุฃ" โ ุจุฏูู API call (ุจุญุซ ูุญูู)
3. ุงุจุญุซ "ุฃุญ" โ ุจุฏูู API call (ุจุญุซ ูุญูู)
4. ุงูุณุญ โ ุจุฏูู API call (ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ุงูุฃุตููุฉ)
5. ุงุฎุชุฑ โ ๐ฅ Loading surahs (API call 2)
```

---

## **3๏ธโฃ ุงุฎุชุจุงุฑ: ุงูููุงุญุฉ ุณูุณุฉ ูุณุฑูุนุฉ**

### **ุงููุฏู:**
ุงูุชุฃูุฏ ูู ุฃู ุงูููุงุญุฉ ุจูู ุงูุดุงุดุงุช ุณูุณุฉ ุจุฏูู ุชุฃุฎูุฑ

### **ุงูุฎุทูุงุช:**

```
1. ุงุจุฏุฃ ุงูุชุทุจูู
2. Reciters โ ุงุฎุชุฑ ุฑูุณูุชุฑ
   โฑ๏ธ ุงูููุช ุงููุชููุน: < 1 ุซุงููุฉ
   โ (ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูุญููุฉ ูู APIุ ูุฏ ุชุณุชุบุฑู ุฃุทูู)

3. Surahs โ ุงุฎุชุฑ ุณูุฑุฉ
   โฑ๏ธ ุงูููุช ุงููุชููุน: < 1 ุซุงููุฉ
   โ (ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูุญููุฉ ูู APIุ ูุฏ ุชุณุชุบุฑู ุฃุทูู)

4. Player โ ุงุถุบุท Play
   โฑ๏ธ ุงูููุช ุงููุชููุน: ูุจุฏุฃ ุงูุชุดุบูู ููุฑุงู
   โ

5. Player โ ุงุถุบุท Skip Forward/Back
   โฑ๏ธ ุงูููุช ุงููุชููุน: < 500ms
   โ

6. Player โ ุงุถุบุท Back
   โฑ๏ธ ุงูููุช ุงููุชููุน: ููุฑู (< 100ms)
   โ (ูุง reloadุ ุงูุจูุงูุงุช ููุฌูุฏุฉ)

7. Surahs โ ุงุถุบุท Back
   โฑ๏ธ ุงูููุช ุงููุชููุน: ููุฑู (< 100ms)
   โ (ูุง reloadุ ุงูุจูุงูุงุช ููุฌูุฏุฉ)
```

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

```
โ Reciters โ ุฃูู ุชุญููู ูุฏ ูุณุชุบุฑู ููุชุงู (API)
โ Reciters โ Pop ูู Surahs = ููุฑู
โ Surahs โ ุฃูู ุชุญููู ูุฏ ูุณุชุบุฑู ููุชุงู (API)
โ Surahs โ Pop ูู Player = ููุฑู
โ Player โ ูุนูู ุจุณูุงุณุฉ
โ Player โ Skip/Play/Pause ูุนูู ููุฑุงู
```

---

## **4๏ธโฃ ุงุฎุชุจุงุฑ: ุนุฏู ูุฌูุฏ Memory Leak**

### **ุงููุฏู:**
ุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุชุณุฑูุจ ุฐุงูุฑุฉ (memory leak)

### **ุงูุฎุทูุงุช:**

```
1. ูู Android Studio / VS Code:
   โ ูุชุญ DevTools (Flutter)
   โ ุงุฎุชุฑ Memory tab

2. ุงุจุฏุฃ ุงูุชุทุจูู
   โ ูุงุญุธ ุงุณุชููุงู ุงูุฐุงูุฑุฉ (ูุซูุงู: 50 MB)

3. ุชููู ุจูู ุงูุดุงุดุงุช 10 ูุฑุงุช:
   Reciters โ โ Surahs โ โ Player
   
4. ุจุนุฏ ุงูุชููู:
   โ ูุงุญุธ ุงุณุชููุงู ุงูุฐุงูุฑุฉ (ูุฌุจ ุฃู ูููู ูุฑูุจุงู ูู ุงูุจุฏุงูุฉ)
   โ ุฅุฐุง ูุงูุช ุงูุฒูุงุฏุฉ > 10 MBุ ูุฏ ูููู ููุงู leak

5. ุงุถุบุท GC (Garbage Collection) ูู DevTools:
   โ ูุฌุจ ุฃู ุชูุฎูุถ ุงูุฐุงูุฑุฉ
   โ ุฅุฐุง ุงูุฎูุถุช ุจุดูู ูุจูุฑุ ูุง memory leak
```

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

```
Before: ~50 MB
After navigation x10: ~55 MB (ุชูุฑูุจุงู)
After GC: ~50 MB

โ ูุง ุชุณุฑูุจ ูุจูุฑ ูู ุงูุฐุงูุฑุฉ
```

---

## **5๏ธโฃ ุงุฎุชุจุงุฑ: App Lifecycle (Background/Foreground)**

### **ุงููุฏู:**
ุงูุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ุชุจูู ุนูุฏ ููู ุงูุชุทุจูู ููุฎูููุฉ ูุงูุนูุฏุฉ

### **ุงูุฎุทูุงุช:**

```
1. ุงูุชุญ Reciters
   โ ูุงุฆูุฉ ุงููุฑุงุก ููุฌูุฏุฉ

2. ุงุถุบุท Home button (ููู ููุฎูููุฉ)
   โฑ๏ธ ุงูุชุธุฑ 5 ุซูุงูู

3. ุงุถุบุท ุนูู ุงูุชุทุจูู (ุงูุนูุฏุฉ ููุฃูุงู)
   โ ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุงููุฑุงุก
   โ ุงูุจูุงูุงุช ูู ุชุฎุชูู
   โ ูู Log ูุฌุจ ุฃูุง ุชุฑู ุงุณุชุฏุนุงุก ุฌุฏูุฏ

4. ูุฑุฑ ูุน Surahs ู Player
   โ ููุณ ุงูุณููู ูุฌุจ ุฃู ูุญุฏุซ
```

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

```
1. Reciters open โ background โ foreground
   โ Reciters ููุฌูุฏุฉ (ูุง reload)

2. Surahs open โ background โ foreground
   โ Surahs ููุฌูุฏุฉ (ูุง reload)

3. Player playing โ background โ foreground
   โ Player ููุฌูุฏุ ุงูุชุดุบูู ูุฏ ูุณุชุฃูู ุฃู ูุชููู
   โ (ูุฐุง ูุนุชูุฏ ุนูู ุนุฏูุฏ ูู ุงูุนูุงูู)
```

---

## **6๏ธโฃ ุงุฎุชุจุงุฑ: Console Logs**

### **ุงููุฏู:**
ุงูุชุฃูุฏ ูู ุฃู ุงูู logs ุชุนูุณ ุงูุณููู ุงูุตุญูุญ

### **ุงูุฎุทูุงุช:**

```
1. ุงูุชุญ ุฃู ูู ุจุชุดุบูู ุงูุชุทุจูู
2. ุงูุธุฑ ุฅูู Console ูู VS Code / Android Studio

3. ุงุชุจุน ุงูููุท ุงููุชููุน:

   โ Reciters Screen:
      ๐ฅ Loading reciters for language: ar
      (ูุฑุฉ ูุงุญุฏุฉ ููุท ุนูุฏ ุงูุชุชุงุญ ุงูุดุงุดุฉ)

   โ Search:
      (ุจุฏูู log ุฅุถุงูู - ุจุญุซ ูุญูู)

   โ Surahs Screen:
      ๐ฅ Loading surahs for: ุฃุญูุฏ ุงูุนุฌูู
      (ูุฑุฉ ูุงุญุฏุฉ ููุท ุนูุฏ ุงูุชุชุงุญ ุงูุดุงุดุฉ)

   โ Player Screen:
      ๐ Initializing audio for track: ุงููุงุชุญุฉ
      ๐ฅ Loading: https://...
      ๐ Setting up new listeners...
      โ Audio initialized successfully

   โ Pop ูู Player:
      ๐ Popping from AudioSurahsScreen - data remains in Bloc

   โ Return ูู Surahs:
      (ุจุฏูู log ุฌุฏูุฏ - ุงูุจูุงูุงุช ููุฌูุฏุฉ)
```

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

```
โ ูุง ุชุฌุจ ุฃู ุชุฑู:
   - ๐ฅ Loading reciters ุธููุฑ ูุฑุชูู
   - ๐ App resumed - reloading ... (ูุฐุง ุญูุฐูู)
   - ุนุฏุฉ ุงุณุชุฏุนุงุกุงุช LoadRecitersEvent

โ ูุฌุจ ุฃู ุชุฑู:
   - ๐ฅ Loading ... ูุฑุฉ ูุงุญุฏุฉ ููุท ููู ุดุงุดุฉ
   - ๐ Popping ... ุนูุฏ ุงูุฑุฌูุน
   - ุจุฏูู reload ุนูุฏ ุงูุจุญุซ
```

---

## **7๏ธโฃ ุงุฎุชุจุงุฑ: Network Monitoring**

### **ุงููุฏู:**
ุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุงุณุชุฏุนุงุกุงุช API ุบูุฑ ุถุฑูุฑูุฉ

### **ุงูุฎุทูุงุช:**

```
1. ูู Android Studio:
   โ View โ Tool Windows โ Profiler

2. ุงุจุฏุฃ ุงูุชุทุจูู
   โ ูุงุญุธ Network tab

3. ุชููู ุจูู ุงูุดุงุดุงุช:

   โ Reciters open:
      1 API call: GET /reciters?language=ar

   โ Search:
      0 API calls (ุจุญุซ ูุญูู)

   โ Select Reciter:
      1 API call: GET /surahs?reciter_id=...

   โ Select Surah:
      0 API calls (Playlist ูุญูู)

   โ Pop ูู Player:
      0 API calls

   โ Pop ูู Surahs:
      0 API calls

4. ุงููุฌููุน ุงููุชููุน:
   - 2 API calls (ุฑูุณูุชุฑุฒ + ุณูุฑ)
   - 0 calls ุบูุฑ ุถุฑูุฑูุฉ
```

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

```
Minimum calls: 2
- 1 for Reciters
- 1 for Surahs
- 0 for unnecessary requests

โ ุฅุฐุง ูุงูุช ุฃูุซุฑ ูู 2:
   โ ูุฏ ูููู ููุงู reload ุบูุฑ ุถุฑูุฑู

โ ุฅุฐุง ูุงูุช 2 ุฃู ุฃูู:
   โ ุงูุญู ูุนูู ุจุดูู ุตุญูุญ
```

---

## **ููุฎุต ููุงุท ุงูุงุฎุชุจุงุฑ:**

| ุงูููุทุฉ | โ ุงููุฌุงุญ | โ ุงููุดู |
|--------|---------|--------|
| **Pop ูุญุงูุธ ุนูู ุงูุจูุงูุงุช** | Surahs/Reciters ููุฌูุฏุฉ | ุชุฎุชูู |
| **ูุง reload ุนูุฏ Search** | ุจุญุซ ููุฑู | ุชุฃุฎูุฑ/reload |
| **ููุงุญุฉ ุณูุณุฉ** | < 1s ููุชููู | ุชุฃุฎูุฑ |
| **ุจุฏูู Memory Leak** | ุซุงุจุชุฉ ุจุนุฏ GC | ุฒูุงุฏุฉ ูุณุชูุฑุฉ |
| **Background/Foreground** | ุงูุจูุงูุงุช ุจุงููุฉ | ุชุฎุชูู |
| **Logs ุตุญูุญุฉ** | ุชุญููู ูุงุญุฏ | ุชุญููู ูุชูุฑุฑ |
| **Network ูุญุณูู** | 2 calls | > 2 calls ุบูุฑ ุถุฑูุฑูุฉ |

---

## **ุงูุฎุทูุงุช ุงูููุงุฆูุฉ:**

```
1. ุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุฃุนูุงู
2. ุชุฃูุฏ ูู ุงููุชุงุฆุฌ ุงููุชููุนุฉ
3. ุฅุฐุง ูุงู ููุงู ูุดุงูู:
   - ุชุญูู ูู Console logs
   - ุงูุธุฑ ุฅูู Network calls
   - ุงุฎุชุจุฑ Memory usage
4. ูู ุญุงูุฉ ุงููุฌุงุญ:
   โ ุงูุญู ูุทุจู ุจุดูู ุตุญูุญ
   โ ุงูุจูุงูุงุช ุชุจูู ุนูุฏ Pop
   โ ูุง reload ุบูุฑ ุถุฑูุฑู
   โ ุงูููุงุญุฉ ุณูุณุฉ ูุณุฑูุนุฉ
```

